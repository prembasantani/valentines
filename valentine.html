<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Will you be my Valentine?</title>

		<!-- Tailwind CDN (play) -->
		<script src="https://cdn.tailwindcss.com"></script>
		<!-- Bootstrap CSS -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />

		<style>
			:root {
				--pink1: #ffd6e8;
				--pink2: #ffb3cf;
				--accent: #ff6b9a;
				--success1: #d1fae5;
				--success2: #bbf7d0;
			}
			html,
			body {
				height: 100%;
			}
			body {
				background:
					radial-gradient(circle at 10% 20%, var(--pink1), transparent 20%),
					radial-gradient(circle at 90% 80%, var(--pink2), transparent 20%),
					linear-gradient(180deg, #fff0f6, #ffecf3 60%);
				display: flex;
				align-items: center;
				justify-content: center;
				overflow: hidden;
				font-family:
					Inter,
					system-ui,
					-apple-system,
					"Segoe UI",
					Roboto,
					"Helvetica Neue",
					Arial;
				transition: background 600ms ease;
			}

			.card-custom {
				background: rgba(255, 255, 255, 0.85);
				border-radius: 20px;
				padding: 28px;
				box-shadow: 0 8px 30px rgba(203, 25, 86, 0.12);
				max-width: 720px;
				width: 95%;
				text-align: center;
			}

			.question {
				font-size: clamp(1.4rem, 2.8vw, 2.5rem);
				font-weight: 700;
				color: #7b0838;
			}

			/* Button area */
			#btnArea {
				position: relative;
				height: 140px;
				margin-top: 18px;
			}
			#noBtn {
				position: absolute;
				right: 12%;
				top: 35%;
				transition: transform 200ms cubic-bezier(0.2, 0.8, 0.2, 1);
			}
			#yesBtn {
				position: relative;
				z-index: 2;
			}

			/* Heart float decor */
			.heart {
				position: absolute;
				font-size: 28px;
				animation: floaty 6s linear infinite;
				opacity: 0.9;
			}
			.heart.one {
				left: 6%;
				top: 6%;
				animation-duration: 7s;
				color: #ff6b9a;
			}
			.heart.two {
				right: 8%;
				top: 10%;
				animation-duration: 5s;
				color: #ff98b2;
			}
			.heart.three {
				left: 36%;
				bottom: 2%;
				animation-duration: 8s;
				color: #ff6b9a;
			}

			@keyframes floaty {
				0% {
					transform: translateY(0) scale(1);
				}
				50% {
					transform: translateY(-18px) scale(1.06);
				}
				100% {
					transform: translateY(0) scale(1);
				}
			}

			/* Success theme */
			body.success-bg {
				background: linear-gradient(180deg, var(--success1), var(--success2));
			}

			/* Choice list */
			.choice-card {
				cursor: pointer;
			}

			/* Mobile responsiveness: stack buttons and increase tap targets */
			@media (max-width: 576px) {
				#btnArea {
					height: auto;
					flex-direction: column !important;
					gap: 0.5rem;
					padding: 12px 0;
				}
				#yesBtn,
				#noBtn {
					width: 90%;
					margin: 0.4rem auto;
					font-size: 1.05rem;
					padding: 14px 18px;
				}
				#noBtn {
					position: static !important;
					transform: none !important;
				}
				.card-custom {
					padding: 18px;
					border-radius: 16px;
				}
			}

			/* Slight larger buttons for comfortable tapping */
			#yesBtn,
			#noBtn {
				touch-action: manipulation;
			}
		</style>
	</head>
	<body>
		<div class="card-custom shadow-lg">
			<div class="heart one">‚ù§Ô∏è</div>
			<div class="heart two">üíò</div>
			<div class="heart three">üíï</div>

			<div id="mainContent">
				<h1 id="mainText" class="question">Will you be my Valentine Debasreeta Ji?</h1>
				<p class="text-muted mt-2">(Hover the <strong>No</strong> and try to catch it!)</p>

				<div id="btnArea" class="d-flex align-items-center justify-content-center">
					<button
						id="yesBtn"
						class="btn btn-lg btn-pink me-3"
						style="
							background: var(--accent);
							color: white;
							border: none;
							box-shadow: 0 6px 18px rgba(255, 107, 154, 0.2);
						"
					>
						Yes ‚ù§Ô∏è
					</button>

					<button
						id="noBtn"
						class="btn btn-outline-dark btn-lg"
						style="background: white; border-radius: 10px; padding: 10px 18px"
					>
						No üòà
					</button>
				</div>

				<!-- <small id="tipText" class="text-muted d-block mt-3"
					>Tip: try hovering over <strong>No</strong> üòâ (On touch devices, No stays put‚Äîtap Yes to
					choose!)</small
				> -->
			</div>
		</div>

		<!-- Evil Modal -->
		<div class="modal fade" id="evilModal" tabindex="-1" aria-labelledby="evilModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="evilModalLabel">Oh no... üòà</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body text-center">
						<p class="mb-3">You clicked <strong>No</strong> ‚Äî brave choice, but beware!</p>
						<p class="fs-5 text-danger">The cookies will be replaced by broccoli. Forever.</p>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Try Again</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Bootstrap JS bundle -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
		<!-- canvas-confetti for confetti animations -->
		<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

		<script>
			document.addEventListener("DOMContentLoaded", () => {
				const noBtn = document.getElementById("noBtn");
				const yesBtn = document.getElementById("yesBtn");
				const area = document.getElementById("btnArea");
				const mainText = document.getElementById("mainText");

				const isTouch = "ontouchstart" in window || navigator.maxTouchPoints > 0;
				const rect = area.getBoundingClientRect();

				function moveNo() {
					const btnRect = noBtn.getBoundingClientRect();
					const padding = 8; // small padding from edges

					// current offset of the button relative to the area
					const currentOffsetX = btnRect.left - rect.left;
					const currentOffsetY = btnRect.top - rect.top;

					// available space for the button's top-left inside the area
					const maxX = Math.max(0, rect.width - btnRect.width - padding);
					const maxY = Math.max(0, rect.height - btnRect.height - padding);

					// pick a new valid offset inside the area
					const newOffsetX = Math.random() * maxX + padding / 2;
					const newOffsetY = Math.random() * maxY + padding / 2;

					// translate relative to the current position so the button stays inside
					const tx = Math.round(newOffsetX - currentOffsetX);
					const ty = Math.round(newOffsetY - currentOffsetY);

					console.log(rect.x, rect.x + rect.width, rect.y, rect.y + rect.height);

					console.log(`Moving No button to (${newOffsetX}, ${newOffsetY}) => translate(${tx}, ${ty})`);

					noBtn.style.transform = `translate(${tx}px, ${ty}px)`;
					// detect touch devices to avoid frustrating movement on mobile
					// if (isTouch) {
					// 	// update tip for touch devices and make the No button static
					// 	const tip = document.getElementById("tipText");
					// 	if (tip) tip.textContent = "Tip: On touch devices, the No button stays put‚Äîtap Yes to choose!";
					// 	noBtn.style.position = "static";
					// 	noBtn.style.transform = "none";
					// 	noBtn.style.marginTop = "0.5rem";
					// } else {
					// noBtn.addEventListener("mouseenter", moveNo);
					// noBtn.addEventListener("focus", moveNo);
					// }
				}

				function showTopEvilMessage(text) {
					const main = document.getElementById("mainContent");
					let alert = document.getElementById("topEvil");
					if (!alert) {
						alert = document.createElement("div");
						alert.id = "topEvil";
						alert.className = "alert alert-danger alert-dismissible fade show";
						alert.setAttribute("role", "alert");
						main.insertBefore(alert, main.firstChild);
					}
					alert.innerHTML = `<div class="d-flex justify-content-between align-items-start"><div>${text}</div><button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>`;
					// auto-remove after a few seconds
					setTimeout(() => {
						try {
							alert.classList.remove("show");
							alert.remove();
						} catch (e) {}
					}, 4200);
				}

				if (!isTouch) {
					noBtn.addEventListener("mouseenter", moveNo);
					noBtn.addEventListener("focus", moveNo);
				}

				noBtn.addEventListener("click", (e) => {
					// if (isTouch) {
					// On touch devices: show message at top and move the button (no modal)
					showTopEvilMessage(
						"You tapped No ‚Äî brave choice, but beware! The cookies might turn into broccoli.",
					);
					moveNo();
					// } else {
					// show evil modal on non-touch devices
					// 	const modalEl = document.getElementById("evilModal");
					// 	const bsModal = new bootstrap.Modal(modalEl);
					// 	bsModal.show();
					// }
				});

				yesBtn.addEventListener("click", () => {
					// multicolor confetti burst (if available)

					// success theme
					document.body.classList.add("success-bg");

					document.getElementById("mainContent").innerHTML = `
			       <h1 class=\"question text-success\">You made the right choice! üåü</h1>
			       <br>
				   <div class=\"list-group mb-3\" id=\"choices\"></div>
			     `;

					const choicesDiv = document.getElementById("choices");
					// choices.forEach((c, idx) => {
					const el = document.createElement("button");
					el.className = "list-group-item list-group-item-action choice-card";
					el.innerHTML =
						"<h1>You make my heart skip a beat. I'd say yes a thousand times over. With you, every day is Valentine's Day. You're my sweetest hello and hardest goodbye. </h1>";
					// el.addEventListener("click", () => {
					// 	// select this message
					// 	document.querySelectorAll(".choice-card").forEach((n) => n.classList.remove("active"));
					// 	el.classList.add("active");
					// 	selected = c;
					// });
					choicesDiv.appendChild(el);
					// });

					// let selected = choices[0];
					// document.querySelector(".choice-card").classList.add("active");

					// document.getElementById("sendBtn").addEventListener("click", async () => {
					// 	try {
					// 		await navigator.clipboard.writeText(selected);
					// 		const toast = document.createElement("div");
					// 		toast.className =
					// 			"toast align-items-center text-bg-success border-0 position-fixed bottom-0 end-0 m-3 show";
					// 		toast.setAttribute("role", "alert");
					// 		toast.innerHTML = `<div class=\"d-flex\"><div class=\"toast-body\">Copied: "${selected}"</div><button type=\"button\" class=\"btn-close btn-close-white me-2 m-auto\" data-bs-dismiss=\"toast\"></button></div>`;
					// 		document.body.appendChild(toast);
					// 		setTimeout(() => toast.remove(), 2500);
					// 	} catch (err) {
					// 		alert("Copied to clipboard: " + selected);
					// 	}
					// });

					document.getElementById("resetBtn").addEventListener("click", () => location.reload());

					// gentle confetti hearts fallback
					for (let i = 0; i < 18; i++) {
						const h = document.createElement("div");
						h.className = "heart";
						h.textContent = "üíö";
						h.style.left = Math.random() * 100 + "%";
						h.style.top = Math.random() * 100 + "%";
						h.style.fontSize = 12 + Math.random() * 36 + "px";
						h.style.animationDuration = 4 + Math.random() * 6 + "s";
						document.body.appendChild(h);
						setTimeout(() => h.remove(), 4200);
					}
				});

				// accessibility: move when arrow keys hover over no button when focused
				noBtn.addEventListener("keydown", (e) => {
					if (e.key === "Enter" || e.key === " ") {
						e.preventDefault();
						moveNo();
					}
				});
			});
		</script>
	</body>
</html>
